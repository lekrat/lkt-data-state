(function(a,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("lkt-tools")):typeof define=="function"&&define.amd?define(["exports","lkt-tools"],s):(a=typeof globalThis<"u"?globalThis:a||self,s(a.LktState={},a.LktTools))})(this,function(a,s){"use strict";class h{constructor(){this.data="",this.originalData="",this.removeDataProps=[]}preventStoreProps(t){return this.removeDataProps=t,this}parseData(t){t=JSON.parse(JSON.stringify(t)),this.removeDataProps.length>0&&this.removeDataProps.forEach(e=>{t.hasOwnProperty(e)&&delete t[e]});let r={};for(let e in t)if(t.hasOwnProperty(e)&&t[e]!==null)if(t[e]instanceof Date)isNaN(t[e].valueOf())||(r[e]=s.date("Y-m-d H:i:s",t[e]));else if(s.isObject(t[e]))r[e]=this.parseData(t[e]);else if(s.isArray(t[e])){let o=[];t[e].forEach(l=>{o.push(this.parseData(l))}),r[e]=o}else s.isNumeric(t[e])?r[e]=String(t[e]):s.isFunction(t[e])||(r[e]=t[e]);return r=s.sortObject(r),JSON.stringify(r)}store(t){return this.data=this.parseData(t),this}reset(t){return this.data=this.parseData(t),this.originalData=this.parseData(t),this}hasModifications(){return this.data!==this.originalData}}const n={data(){return{_lkt_dataState:new h,_lkt_dataStateChanged:!1}},watch:{"_lkt_dataState.data"(i){this._lkt_dataStateChanged=this.modifiedDataController.hasModifications()},_lkt_dataStateChanged(i){this.$emit("data-state-changed",i)}},methods:{$preventStoreProps(i){this._lkt_dataState.preventStoreProps(i)},$storeState(i={}){this._lkt_dataState.store(i)},$resetState(i={}){this._lkt_dataState.reset(i)}}},f={install:(i,t)=>{i.mixin(n)}};a.DataStateMixin=n,a.default=f,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
